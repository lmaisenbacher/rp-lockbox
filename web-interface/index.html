<!--
    Copyright (c) 2019, Malte Bieringer, Fabian Schmid
    Copyright (c) 2023, Lothar Maisenbacher

    All rights reserved.
-->
<!doctype html>
<html lang="us">
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>Lockbox</title>
	<link href="jquery-ui.css" rel="stylesheet">
	<style>
	body{
		font-family: "Trebuchet MS", sans-serif;
		margin: 50px;
	}
    .output-group {
        display: inline-block;
        padding: 5px;
    }
    .flex-container {
        display: flex;
        flex-wrap: wrap;
        align-items: stretch;
        align-content: flex-start;
    }
	.relock-select {
		width: 145px;
        height: 40px;
        font-size: 16px;
	}
    .waveform-select {
		width: 145px;
        height: 40px;
        font-size: 16px;
	}
    .button {
        text-align: center;
    }

     /* Customize the label (the container) */
    .checkbox-container {
        display: block;
        position: relative;
        padding-left: 35px;
        margin-bottom: 12px;
        cursor: pointer;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }

    /* Hide the browser's default checkbox */
    .checkbox-container input {
        position: absolute;
        opacity: 0;
        cursor: pointer;
        height: 0;
        width: 0;
    }

    /* Create a custom checkbox */
    .checkmark {
        position: absolute;
        top: 0;
        left: 0;
         height: 25px;
        width: 25px;
         background-color: #eee;
    }

    /* On mouse-over, add a grey background color */
    .checkbox-container:hover input ~ .checkmark {
        background-color: #ccc;
    }

    /* When the checkbox is checked, add a blue background */
    .checkbox-container input:checked ~ .checkmark {
        background-color: #2196F3;
    }

    /* Create the checkmark/indicator (hidden when not checked) */
    .checkmark:after {
        content: "";
        position: absolute;
        display: none;
    }

    /* Show the checkmark when checked */
    .checkbox-container input:checked ~ .checkmark:after {
         display: block;
    }

    /* Style the checkmark/indicator */
    .checkbox-container .checkmark:after {
        left: 9px;
        top: 5px;
        width: 5px;
        height: 10px;
        border: solid white;
        border-width: 0 3px 3px 0;
        -webkit-transform: rotate(45deg);
        -ms-transform: rotate(45deg);
         transform: rotate(45deg);
    } 
	</style>
<script src="external/jquery/jquery.js"></script>
<script src="jquery-ui.js"></script>
<script>
        // Global variables
        var update_interval = 500;
        var update_interval_values = 100;
        var spinner_pid_sp_name = ["#spinner_pid_11_sp", "#spinner_pid_21_sp", "#spinner_pid_12_sp", "#spinner_pid_22_sp"];
        var spinner_pid_kp_name = ["#spinner_pid_11_kp", "#spinner_pid_21_kp", "#spinner_pid_12_kp", "#spinner_pid_22_kp"];
        var spinner_pid_ki_name = ["#spinner_pid_11_ki", "#spinner_pid_21_ki", "#spinner_pid_12_ki", "#spinner_pid_22_ki"];
        var spinner_pid_kd_name = ["#spinner_pid_11_kd", "#spinner_pid_21_kd", "#spinner_pid_12_kd", "#spinner_pid_22_kd"];
        var spinner_pid_kii_name = ["#spinner_pid_11_kii", "#spinner_pid_21_kii", "#spinner_pid_12_kii", "#spinner_pid_22_kii"];
        var spinner_pid_kg_name = ["#spinner_pid_11_kg", "#spinner_pid_21_kg", "#spinner_pid_12_kg", "#spinner_pid_22_kg"];        
        var checkbox_pid_inv_name = ["#checkbox_pid_11_inv", "#checkbox_pid_21_inv", "#checkbox_pid_12_inv", "#checkbox_pid_22_inv"];
        var checkbox_pid_hold_name = ["#checkbox_pid_11_hold", "#checkbox_pid_21_hold", "#checkbox_pid_12_hold", "#checkbox_pid_22_hold"];
        var checkbox_pid_int_res_name = ["#checkbox_pid_11_int_res", "#checkbox_pid_21_int_res", "#checkbox_pid_12_int_res", "#checkbox_pid_22_int_res"];
        var checkbox_pid_int_auto_reset_name = ["#checkbox_pid_11_int_auto_reset", "#checkbox_pid_21_int_auto_reset", "#checkbox_pid_12_int_auto_reset", "#checkbox_pid_22_int_auto_reset"];
        var checkbox_pid_enabled_name = ["#checkbox_pid_11_enabled", "#checkbox_pid_21_enabled", "#checkbox_pid_12_enabled", "#checkbox_pid_22_enabled"];
        var spinner_relock_min_name = ["#spinner_relock_11_min", "#spinner_relock_21_min", "#spinner_relock_12_min", "#spinner_relock_22_min"];
        var spinner_relock_max_name = ["#spinner_relock_11_max", "#spinner_relock_21_max", "#spinner_relock_12_max", "#spinner_relock_22_max"];
        var spinner_relock_slew_rate_name = ["#spinner_relock_11_slew_rate", "#spinner_relock_21_slew_rate", "#spinner_relock_12_slew_rate", "#spinner_relock_22_slew_rate"];
        var checkbox_relock_enabled_name = ["#checkbox_relock_11_enabled", "#checkbox_relock_21_enabled", "#checkbox_relock_12_enabled", "#checkbox_relock_22_enabled"];
        var relock_input_name = ["#relock_11_input", "#relock_21_input", "#relock_12_input", "#relock_22_input"];
        var spinner_limit_name = ["#spinner_limit_1_min", "#spinner_limit_2_min", "#spinner_limit_1_max", "#spinner_limit_2_max"];
        var spinner_sg_amp_offset_name = ["#spinner_sg_1_amp", "#spinner_sg_2_amp", "#spinner_sg_1_offset", "#spinner_sg_2_offset"];
        var ain_voltage_name = ["#ain_voltage_11", "#ain_voltage_21", "#ain_voltage_12", "#ain_voltage_22"];
        var lock_status_name = ["#lock_status_11", "#lock_status_21", "#lock_status_12", "#lock_status_22"];        

        function set_setpoint(pid, setpoint) {
            $.post("_set_setpoint", {
                pid: pid,
                setpoint: setpoint,
            });
        };
		
		function set_kp(pid, kp) {
            $.post("_set_kp", {
                pid: pid,
                kp: kp,
            });
        };

		function set_ki(pid, ki) {
            $.post("_set_ki", {
                pid: pid,
                ki: ki,
            });
        };
		
		function set_kd(pid, kd) {
            $.post("_set_kd", {
                pid: pid,
                kd: kd,
            });
        };

		function set_kii(pid, kii) {
            $.post("_set_kii", {
                pid: pid,
                kii: kii,
            });
        };        

		function set_kg(pid, kg) {
            $.post("_set_kg", {
                pid: pid,
                kg: kg,
            });
        };                
		
        function set_inverted(pid, inverted) {
            $.post("_set_inverted", {
                pid: pid,
                inverted: inverted,
            });
        };
		
		function set_hold(pid, hold) {
			$.post("_set_hold", {
				pid: pid,
				hold: hold,
			});
		};
		
		function set_int_reset(pid, int_reset) {
			$.post("_set_int_reset", {
				pid: pid,
				int_reset: int_reset,
			});
		};
		
		function set_int_auto(pid, int_auto) {
			$.post("_set_int_auto", {
				pid: pid,
				int_auto: int_auto,
			});
		};

		function set_pid_enabled(pid, pid_enabled) {
			$.post("_set_pid_enabled", {
				pid: pid,
				pid_enabled: pid_enabled,
			});
		};        
		
		function set_relock_min(pid, relock_min) {
			$.post("_set_relock_min", {
				pid: pid,
				relock_min: relock_min,
			});
		};
		
		function set_relock_max(pid, relock_max) {
			$.post("_set_relock_max", {
				pid: pid,
				relock_max: relock_max,
			});
		};
		
		function set_relock_slew_rate(pid, relock_slew_rate) {
			$.post("_set_relock_slew_rate", {
				pid: pid,
				relock_slew_rate: relock_slew_rate,
			});
		};
		
		function set_relock_enabled(pid, relock_enabled) {
			$.post("_set_relock_enabled", {
				pid: pid,
				relock_enabled: relock_enabled,
			});
		};
		
		function set_relock_input(pid, ain) {
			$.post("_set_relock_input", {
			pid: pid,
			ain: ain,
			});
		};
		
		function set_limit_min(output, limit_min) {
			$.post("_set_limit_min", {
			output: output,
			limit_min: limit_min,
			});
		};
		
		function set_limit_max(output, limit_max) {
			$.post("_set_limit_max", {
			output: output,
			limit_max: limit_max,
			});
		};
		
		function set_waveform(output, waveform) {
			$.post("_set_waveform", {
			output: output,
			waveform: waveform,
			});
		};
		
		function set_sg_amp(output, amp) {
			$.post("_set_sg_amp", {
			output: output,
			amp: amp,
			});
		};
		
		function set_sg_freq(output, freq) {
			$.post("_set_sg_freq", {
			output: output,
			freq: freq,
			});
		};
		
		function set_sg_offset(output, offset) {
			$.post("_set_sg_offset", {
			output: output,
			offset: offset,
			});
		};
		
		function set_sg_enabled(output, sg_enabled) {
			$.post("_set_sg_enabled", {
			output: output,
			sg_enabled: sg_enabled,
			});
        };

		function set_sg_poffset_enabled(output, offset_enabled) {
			$.post("_set_sg_poffset_enabled", {
			output: output,
			offset_enabled: offset_enabled,
			});
        };
    
        function save_parameters() {
            $.post("_save_parameters", {});
        };

        function load_parameters() {
            $.post("_load_parameters", {});
        };

        function toggle_lock_scan(event, ui) {
            var pid;
            var output;
            var enabled;
            switch(event.target.id) {
                case "button_toggle_11":
                    pid = 0;
                    output = 0;
                    enabled = $("#checkbox_sg_1_enabled").prop("checked");
                    $("#checkbox_sg_1_enabled").prop("checked", !enabled);
                    $("#checkbox_pid_11_hold").prop("checked", !enabled);
                    $("#checkbox_pid_11_int_res").prop("checked", !enabled);
                    break;
                case "button_toggle_12":
                    pid = 1;
                    output = 0;
                    enabled = $("#checkbox_sg_1_enabled").prop("checked");
                    $("#checkbox_sg_1_enabled").prop("checked", !enabled);
                    $("#checkbox_pid_12_hold").prop("checked", !enabled);
                    $("#checkbox_pid_12_int_res").prop("checked", !enabled);
                    break;
                case "button_toggle_21":
                    pid = 2;
                    output = 1;
                    enabled = $("#checkbox_sg_2_enabled").prop("checked");
                    $("#checkbox_sg_2_enabled").prop("checked", !enabled);
                    $("#checkbox_pid_21_hold").prop("checked", !enabled);
                    $("#checkbox_pid_21_int_res").prop("checked", !enabled);
                    break;
                case "button_toggle_22":
                    pid = 3;
                    output = 1;
                    enabled = $("#checkbox_sg_2_enabled").prop("checked");
                    $("#checkbox_sg_2_enabled").prop("checked", !enabled);
                    $("#checkbox_pid_22_hold").prop("checked", !enabled);
                    $("#checkbox_pid_22_int_res").prop("checked", !enabled);
                    break;
                default:
                    pid = 0;
            }
            set_sg_enabled(output, !enabled);
            set_int_reset(pid, !enabled);
            set_hold(pid, !enabled);
        };
        
        function setpoint_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "spinner_pid_11_sp":
                    pid = 0;
                    break;
                case "spinner_pid_12_sp":
                    pid = 1;
                    break;
                case "spinner_pid_21_sp":
                    pid = 2;
                    break;
                case "spinner_pid_22_sp":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_setpoint(pid, $(event.target).val());
        }
		
        function kp_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "spinner_pid_11_kp":
                    pid = 0;
                    break;
                case "spinner_pid_12_kp":
                    pid = 1;
                    break;
                case "spinner_pid_21_kp":
                    pid = 2;
                    break;
                case "spinner_pid_22_kp":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_kp(pid, $(event.target).val());
        }
		
        function ki_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "spinner_pid_11_ki":
                    pid = 0;
                    break;
                case "spinner_pid_12_ki":
                    pid = 1;
                    break;
                case "spinner_pid_21_ki":
                    pid = 2;
                    break;
                case "spinner_pid_22_ki":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_ki(pid, $(event.target).val());
        }
		
        function kd_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "spinner_pid_11_kd":
                    pid = 0;
                    break;
                case "spinner_pid_12_kd":
                    pid = 1;
                    break;
                case "spinner_pid_21_kd":
                    pid = 2;
                    break;
                case "spinner_pid_22_kd":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_kd(pid, $(event.target).val());
        }

        function kii_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "spinner_pid_11_kii":
                    pid = 0;
                    break;
                case "spinner_pid_12_kii":
                    pid = 1;
                    break;
                case "spinner_pid_21_kii":
                    pid = 2;
                    break;
                case "spinner_pid_22_kii":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_kii(pid, $(event.target).val());
        }        

        function kg_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "spinner_pid_11_kg":
                    pid = 0;
                    break;
                case "spinner_pid_12_kg":
                    pid = 1;
                    break;
                case "spinner_pid_21_kg":
                    pid = 2;
                    break;
                case "spinner_pid_22_kg":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_kg(pid, $(event.target).val());
        }           

        function inverted_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "checkbox_pid_11_inv":
                    pid = 0;
                    break;
                case "checkbox_pid_12_inv":
                    pid = 1;
                    break;
                case "checkbox_pid_21_inv":
                    pid = 2;
                    break;
                case "checkbox_pid_22_inv":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_inverted(pid, $(event.target).prop("checked"));
        }
		
		function hold_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "checkbox_pid_11_hold":
                    pid = 0;
                    break;
                case "checkbox_pid_12_hold":
                    pid = 1;
                    break;
                case "checkbox_pid_21_hold":
                    pid = 2;
                    break;
                case "checkbox_pid_22_hold":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_hold(pid, $(event.target).prop("checked"));
        }

        function int_reset_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "checkbox_pid_11_int_res":
                    pid = 0;
                    break;
                case "checkbox_pid_12_int_res":
                    pid = 1;
                    break;
                case "checkbox_pid_21_int_res":
                    pid = 2;
                    break;
                case "checkbox_pid_22_int_res":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_int_reset(pid, $(event.target).prop("checked"));
        }

        function int_auto_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "checkbox_pid_11_int_auto_reset":
                    pid = 0;
                    break;
                case "checkbox_pid_12_int_auto_reset":
                    pid = 1;
                    break;
                case "checkbox_pid_21_int_auto_reset":
                    pid = 2;
                    break;
                case "checkbox_pid_22_int_auto_reset":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_int_auto(pid, $(event.target).prop("checked"));
        }

        function pid_enabled_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "checkbox_pid_11_enabled":
                    pid = 0;
                    break;
                case "checkbox_pid_12_enabled":
                    pid = 1;
                    break;
                case "checkbox_pid_21_enabled":
                    pid = 2;
                    break;
                case "checkbox_pid_22_enabled":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_pid_enabled(pid, $(event.target).prop("checked"));
        }

		function relock_min_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "spinner_relock_11_min":
                    pid = 0;
                    break;
                case "spinner_relock_12_min":
                    pid = 1;
                    break;
                case "spinner_relock_21_min":
                    pid = 2;
                    break;
                case "spinner_relock_22_min":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_relock_min(pid, $(event.target).val());
        }	
		
		function relock_max_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "spinner_relock_11_max":
                    pid = 0;
                    break;
                case "spinner_relock_12_max":
                    pid = 1;
                    break;
                case "spinner_relock_21_max":
                    pid = 2;
                    break;
                case "spinner_relock_22_max":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_relock_max(pid, $(event.target).val());
        }	
		
		function relock_slew_rate_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "spinner_relock_11_slew_rate":
                    pid = 0;
                    break;
                case "spinner_relock_12_slew_rate":
                    pid = 1;
                    break;
                case "spinner_relock_21_slew_rate":
                    pid = 2;
                    break;
                case "spinner_relock_22_slew_rate":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_relock_slew_rate(pid, $(event.target).val());
        }	
		
        function relock_enabled_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "checkbox_relock_11_enabled":
                    pid = 0;
                    break;
                case "checkbox_relock_12_enabled":
                    pid = 1;
                    break;
                case "checkbox_relock_21_enabled":
                    pid = 2;
                    break;
                case "checkbox_relock_22_enabled":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_relock_enabled(pid, $(event.target).prop("checked"));
        }
		
        function relock_input_changed(event, ui) {
            var pid;
            switch(event.target.id) {
                case "relock_11_input":
                    pid = 0;
                    break;
                case "relock_12_input":
                    pid = 1;
                    break;
                case "relock_21_input":
                    pid = 2;
                    break;
                case "relock_22_input":
                    pid = 3;
                    break;
                default:
                    pid = 0;
            }
            set_relock_input(pid, $(event.target).val());
        }

		function limit_min_changed(event, ui) {
            var output;
            switch(event.target.id) {
                case "spinner_limit_1_min":
                    output = 0;
                    break;
                case "spinner_limit_2_min":
                    output = 1;
                    break;
                default:
                    output = 0;
            }
            set_limit_min(output, $(event.target).val());
        }	
		
		function limit_max_changed(event, ui) {
            var output;
            switch(event.target.id) {
                case "spinner_limit_1_max":
                    output = 0;
                    break;
                case "spinner_limit_2_max":
                    output = 1;
                    break;
                default:
                    output = 0;
            }
            set_limit_max(output, $(event.target).val());
        }

		function waveform_changed(event, ui) {
            var output;
            switch(event.target.id) {
                case "sg_1_waveform":
                    output = 0;
                    break;
                case "sg_2_waveform":
                    output = 1;
                    break;
                default:
                    output = 0;
            }
            set_waveform(output, $(event.target).val());
        }			
		
		function sg_amp_changed(event, ui) {
            var output;
            switch(event.target.id) {
                case "spinner_sg_1_amp":
                    output = 0;
                    break;
                case "spinner_sg_2_amp":
                    output = 1;
                    break;
                default:
                    output = 0;
            }
            set_sg_amp(output, $(event.target).val());
        }
		
		function sg_freq_changed(event, ui) {
            var output;
            switch(event.target.id) {
                case "spinner_sg_1_freq":
                    output = 0;
                    break;
                case "spinner_sg_2_freq":
                    output = 1;
                    break;
                default:
                    output = 0;
            }
            set_sg_freq(output, $(event.target).val());
        }	
		
		function sg_offset_changed(event, ui) {
            var output;
            switch(event.target.id) {
                case "spinner_sg_1_offset":
                    output = 0;
                    break;
                case "spinner_sg_2_offset":
                    output = 1;
                    break;
                default:
                    output = 0;
            }
            set_sg_offset(output, $(event.target).val());
        }
		
		function sg_enabled_changed(event, ui) {
            var output;
            switch(event.target.id) {
                case "checkbox_sg_1_enabled":
                    output = 0;
                    break;
                case "checkbox_sg_2_enabled":
                    output = 1;
                    break;
                default:
                    output = 0;
            }
            set_sg_enabled(output, $(event.target).prop("checked"));
        }

		function sg_poffset_enabled_changed(event, ui) {
            var output;
            switch(event.target.id) {
                case "checkbox_sg_1_poffset_enabled":
                    output = 0;
                    break;
                case "checkbox_sg_2_poffset_enabled":
                    output = 1;
                    break;
                default:
                    output = 0;
            }
            set_sg_poffset_enabled(output, $(event.target).prop("checked"));
        }        

        function op_mode_changed(event, ui){
            switch(event.target.value){
                case "0":
                    $("#input_1").show();
                    $("#output_group_11").show();
                    $("#output_group_21").hide();
                    $("#input_2").show();
                    $("#output_group_12").hide();
                    $("#output_group_22").show();
                    localStorage.setItem("op_mode_nr", "0");
                    break;
                case "1":
                    $("#input_1").show();
                    $("#output_group_11").show();
                    $("#output_group_21").show();
                    $("#input_2").hide();
                    localStorage.setItem("op_mode_nr", "1");
                    break;
                case "2":
                    $("#input_1").hide();
                    $("#input_2").show();
                    $("#output_group_12").show();
                    $("#output_group_22").show();
                    localStorage.setItem("op_mode_nr", "2");
                    break;
                case "3":
                    $("#input_1").show();
                    $("#output_group_11").show();
                    $("#output_group_12").show();
                    $("#input_2").show();
                    $("#output_group_21").show();
                    $("#output_group_22").show();
                    localStorage.setItem("op_mode_nr", "3");
                default:
                    $("#input_1").show();
                    $("#output_group_11").show();
                    $("#output_group_12").show();
                    $("#input_2").show();
                    $("#output_group_21").show();
                    $("#output_group_22").show();
            }
        }

        function opt_hide_changed(event, ui){
            if (event.target.checked==true){
                $(".options-item").hide();
            }
            else {
                $(".options-item").show();
            }
        }
		
        function update_parameters() {

            $.getJSON("_get_parameters").done(function(data){
                
                var sp_values = [data.pid_11_setpoint, data.pid_21_setpoint, data.pid_12_setpoint, data.pid_22_setpoint];            
                var kp_values = [data.pid_11_kp, data.pid_21_kp, data.pid_12_kp, data.pid_22_kp];            
                var ki_values = [data.pid_11_ki, data.pid_21_ki, data.pid_12_ki, data.pid_22_ki];             
                var kd_values = [data.pid_11_kd, data.pid_21_kd, data.pid_12_kd, data.pid_22_kd];              
                var inv_values = [data.pid_11_inverted, data.pid_21_inverted, data.pid_12_inverted, data.pid_22_inverted];                
                var hold_values = [data.pid_11_hold, data.pid_21_hold, data.pid_12_hold, data.pid_22_hold];               
                var int_res_values = [data.pid_11_int_res, data.pid_21_int_res, data.pid_12_int_res, data.pid_22_int_res];               
                var int_auto_reset_values = [data.pid_11_int_auto_reset, data.pid_21_int_auto_reset, data.pid_12_int_auto_reset, data.pid_22_int_auto_reset];               
                var enabled_values = [data.pid_11_enabled, data.pid_21_enabled, data.pid_12_enabled, data.pid_22_enabled];                               
                var relock_min_values = [data.pid_11_relock_min, data.pid_21_relock_min, data.pid_12_relock_min, data.pid_22_relock_min];               
                var relock_max_values = [data.pid_11_relock_max, data.pid_21_relock_max, data.pid_12_relock_max, data.pid_22_relock_max];             
                var relock_slew_rate_values = [data.pid_11_relock_slew_rate, data.pid_21_relock_slew_rate, data.pid_12_relock_slew_rate, data.pid_22_relock_slew_rate];               
                var relock_enabled_values = [data.pid_11_relock_enabled, data.pid_21_relock_enabled, data.pid_12_relock_enabled, data.pid_22_relock_enabled];  
                var relock_input_values = [data.pid_11_relock_input, data.pid_21_relock_input, data.pid_12_relock_input, data.pid_22_relock_input];            
                var limit_values = [data.limit_min_1, data.limit_min_2, data.limit_max_1, data.limit_max_2];               
                var sg_amp_offset_values = [data.sg_1_amp, data.sg_2_amp, data.sg_1_offset, data.sg_2_offset];

                for(i=0; i<4; i++){
                    $(spinner_pid_sp_name[i]).not(":focus").val(sp_values[i].toFixed(3));
                    $(spinner_pid_kp_name[i]).not(":focus").val(kp_values[i].toFixed(3));
                    $(spinner_pid_ki_name[i]).not(":focus").val(ki_values[i].toFixed(2));
                    $(spinner_pid_kd_name[i]).not(":focus").val(kd_values[i]);
                    $(checkbox_pid_inv_name[i]).not(":focus").prop("checked", inv_values[i]);
                    $(checkbox_pid_hold_name[i]).not(":focus").prop("checked", hold_values[i]);
                    $(checkbox_pid_int_res_name[i]).not(":focus").prop("checked", int_res_values[i]);
                    $(checkbox_pid_int_auto_reset_name[i]).not(":focus").prop("checked", int_auto_reset_values[i]);
                    $(checkbox_pid_enabled_name[i]).not(":focus").prop("checked", enabled_values[i]);                    
                    $(spinner_relock_min_name[i]).not(":focus").val(relock_min_values[i].toFixed(3));
                    $(spinner_relock_max_name[i]).not(":focus").val(relock_max_values[i].toFixed(3));
                    $(spinner_relock_slew_rate_name[i]).not(":focus").val(relock_slew_rate_values[i].toFixed(2));
                    $(checkbox_relock_enabled_name[i]).not(":focus").prop("checked", relock_enabled_values[i]);
                    $(relock_input_name[i]).not(":focus").val(relock_input_values[i]);
                    $(spinner_limit_name[i]).not(":focus").val(limit_values[i].toFixed(3));
                    $(spinner_sg_amp_offset_name[i]).not(":focus").val(sg_amp_offset_values[i].toFixed(3));
                }

                $("#spinner_sg_1_freq").not(":focus").val(data.sg_1_freq.toFixed(2));
				$("#spinner_sg_2_freq").not(":focus").val(data.sg_2_freq.toFixed(2));
                $("#sg_1_waveform").not(":focus").val(data.sg_1_waveform);
				$("#sg_2_waveform").not(":focus").val(data.sg_2_waveform);
				$("#checkbox_sg_1_enabled").not(":focus").prop("checked", data.sg_1_enabled);
				$("#checkbox_sg_2_enabled").not(":focus").prop("checked", data.sg_2_enabled);
				$("#checkbox_sg_1_poffset_enabled").not(":focus").prop("checked", data.sg_1_poffset_enabled);
				$("#checkbox_sg_2_poffset_enabled").not(":focus").prop("checked", data.sg_2_poffset_enabled);

            });
            setTimeout(update_parameters, update_interval);
        };
       
        function update_values() {
            var relock_input_value = [0, 0, 0, 0];
            $.getJSON("_get_values").done(function(data){ 
                var data_values = [data.ain0_voltage, data.ain1_voltage, data.ain2_voltage, data.ain3_voltage];
                var lock_status_values = [data.pid_11_lock_status, data.pid_21_lock_status, data.pid_12_lock_status, data.pid_22_lock_status];                
                for(i=0; i<4; i++){
                    relock_input_value[i] = $(relock_input_name[i]).val();
                    $(ain_voltage_name[i]).val(data_values[relock_input_value[i]-4].toFixed(3));
                    $(lock_status_name[i]).val(lock_status_values[i] ? "Locked" : "Unlocked");
                }
                $("#fast_input_1_voltage").val(data.in_1_voltage.toFixed(3));
                $("#fast_input_2_voltage").val(data.in_2_voltage.toFixed(3));
                $("#fast_output_11_voltage").val(data.out_1_voltage.toFixed(3));
                $("#fast_output_21_voltage").val(data.out_2_voltage.toFixed(3));
                $("#fast_output_12_voltage").val(data.out_1_voltage.toFixed(3));
                $("#fast_output_22_voltage").val(data.out_2_voltage.toFixed(3));
            });
            
            setTimeout(update_values, update_interval_values);
        }; 

    // Runs after page has loaded
    $(function() {

        // Initialize control elements
	
		$( ".sp_spinner" ).spinner({
			start: 0.0,
			step: 0.001,
			min: -1.0,
			max: 1.0
			});
        $( ".sp_spinner" ).width(105);	
        $( ".kp_spinner" ).spinner({
            step: 0.01,
            min: 0.,
            max: 4095.
            });
        $( ".kp_spinner" ).width(105);
        $( ".ki_spinner" ).spinner({
            step: 1.,
            min: 0.,
            max: 7812499.
            });
        $( ".ki_spinner" ).width(105);
        $( ".kd_spinner" ).spinner({
            step: 1,
            min: 0,
            max: 8191
            });
        $( ".kd_spinner" ).width(105);
        $( ".kii_spinner" ).spinner({
            step: 1.,
            min: 0.,
            max: 7812499.
            });
        $( ".kii_spinner" ).width(105);  
        $( ".kg_spinner" ).spinner({
            step: 0.01,
            min: 0.,
            max: 4095.
            });
        $( ".kg_spinner" ).width(105);              
		$( ".relock_limit_min_spinner, .relock_limit_max_spinner" ).spinner({
            step: 0.001,
            min: 0.,
            max: 7.
            });
        $( ".relock_limit_min_spinner, .relock_limit_max_spinner" ).width(105);
		$( ".slew_rate_spinner" ).spinner({
            step: 1.,
            min: 0.058,
            max: 1000000.
            });
        $( ".slew_rate_spinner" ).width(105);
		$( ".output_spinner" ).spinner({
            step: 0.001,
            min: -1.,
            max: 1.
            });
        $( ".output_spinner" ).width(105);
		$( ".freq_spinner" ).spinner({
			value: 1000.,
            step: 1.,
            min: 0.,
            max: 62500000.
            });
        $( ".freq_spinner" ).width(105);
        $( ".other_spinner" ).spinner();
        $( ".other_spinner" ).width(105);
		
        $( ".button").button();

        $("#select_op_mode").selectmenu();
        $("#select_op_mode").prop("value", localStorage.getItem("op_mode_nr")).selectmenu("refresh");

        $(".accordion").accordion({
            collapsible: true,
            active:false
        });
        
        
        // Bind control element events
        $("#select_op_mode").on("selectmenuselect", op_mode_changed);
        $("#select_op_mode").trigger("selectmenuselect");

		$( ".sp_spinner" ).on("spinstop", setpoint_changed);
		$( ".kp_spinner" ).on("spinstop", kp_changed);
		$( ".ki_spinner" ).on("spinstop", ki_changed);
		$( ".kd_spinner" ).on("spinstop", kd_changed);

        $( ".inv_checkbox" ).on("change", inverted_changed);
        $( ".hold_checkbox" ).on("change", hold_changed);
        $( ".int_res_checkbox" ).on("change", int_reset_changed);
        $( ".int_auto_reset_checkbox" ).on("change", int_auto_changed);
		$( ".pid_enabled_checkbox").on("change", pid_enabled_changed);        
		
		$( ".relock_enabled_checkbox").on("change", relock_enabled_changed);
        $( ".relock_limit_min_spinner").on("spinstop", relock_min_changed);
        $( ".relock_limit_max_spinner").on("spinstop", relock_max_changed);
        $( ".slew_rate_spinner").on("spinstop", relock_slew_rate_changed);
        $(".relock-select").on("change", relock_input_changed);
		
		$( "#spinner_limit_1_min").on("spinstop", limit_min_changed);
		$( "#spinner_limit_2_min").on("spinstop", limit_min_changed);
		$( "#spinner_limit_1_max").on("spinstop", limit_max_changed);
		$( "#spinner_limit_2_max").on("spinstop", limit_max_changed);
		
		$( ".sg_enabled_checkbox").on("change", sg_enabled_changed);
		$( ".sg_poffset_enabled_checkbox").on("change", sg_poffset_enabled_changed);
		$( ".freq_spinner" ).on("spinstop", sg_freq_changed);
        $( "#spinner_sg_1_amp" ).on("spinstop", sg_amp_changed);
		$( "#spinner_sg_2_amp" ).on("spinstop", sg_amp_changed);
		$( "#spinner_sg_1_offset" ).on("spinstop", sg_offset_changed);
		$( "#spinner_sg_2_offset" ).on("spinstop", sg_offset_changed);
        $( ".waveform-select" ).on("change", waveform_changed);
        
        $("#save_pams").on("click", save_parameters);
        $("#load_pams").on("click", load_parameters);
        $("#button_toggle_11").on("click", toggle_lock_scan);
        $("#button_toggle_21").on("click", toggle_lock_scan);
        $("#button_toggle_12").on("click", toggle_lock_scan);
        $("#button_toggle_22").on("click", toggle_lock_scan);

        $( "#checkbox_opt_hide").on("change", opt_hide_changed);
		
        
        // Start the update loop
        update_parameters();
        update_values();
    });
</script>
</head>
<body>

    <div class="flex-container">
        
        <fieldset id="input_1" class="output-group">
            <legend><h1>Lockbox (Input 1)</h1></legend>

            <div>
                <a>Input voltage (V)</a>
                <output id="fast_input_1_voltage">0</output>
            </div>
			
            <fieldset class="output-group" id="output_group_11">
                <legend><h2>Output 1</h2></legend>

                <div class="controlgroup-vertical">
                    <label class="checkbox-container">PID + relock output enabled
                        <input type="checkbox" id="checkbox_pid_11_enabled" class="pid_enabled_checkbox">
                        <span class="checkmark"></span>
                    </label>
                </div>

				<a>Output voltage (V)</a>
                <output id="fast_output_11_voltage">0</output>

                <fieldset>
                    <legend><h3>PID</h3></legend>
                    <table>
                        <tr>
                            <td><label for="spinner_pid_11_sp">Setpoint (V)</label></td>
                            <td><input id="spinner_pid_11_sp" class="sp_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_pid_11_kp">KP</label></td>
                            <td><input id="spinner_pid_11_kp" class="kp_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_pid_11_ki">KI (1/s)</label></td>
                            <td><input id="spinner_pid_11_ki" class="ki_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_pid_11_kd">KD</label></td>
                            <td><input id="spinner_pid_11_kd" class="kd_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_pid_11_kii">KII (1/s)</label></td>
                            <td><input id="spinner_pid_11_kii" class="kii_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_pid_11_kg">Global</label></td>
                            <td><input id="spinner_pid_11_kg" class="kg_spinner"></td>
                        </tr>                                                
                    </table>
					
                    <div class="controlgroup-vertical">
                        <label class="checkbox-container">Inverted
                            <input type="checkbox" id="checkbox_pid_11_inv" class="inv_checkbox">
                            <span class="checkmark"></span>
                        </label>
                        <label class="checkbox-container">Hold internal state
                                <input type="checkbox" id="checkbox_pid_11_hold" class="hold_checkbox">
                                <span class="checkmark"></span>
                        </label>
                        <label class="checkbox-container">Integrator reset
                                <input type="checkbox" id="checkbox_pid_11_int_res" class="int_res_checkbox">
                                <span class="checkmark"></span>
                        </label>
                        <label class="checkbox-container">Automatic integrator reset
                                <input type="checkbox" id="checkbox_pid_11_int_auto_reset" class="int_auto_reset_checkbox">
                                <span class="checkmark"></span>
                        </label>
                        <button id="button_toggle_11" class="button">Toggle Lock/Scan</button>
                    </div>

                </fieldset>
				
                <fieldset class="relock-group">
                    <legend><h3>Lock monitoring and relock</h3></legend>
					
                    <table>
                        <tr>
                            <label class="checkbox-container">Relock enabled
                                <input type="checkbox" id="checkbox_relock_11_enabled" class="relock_enabled_checkbox">
                                <span class="checkmark"></span>
                            </label>
                        </tr>
                        <tr>
                            <td><label for="spinner_relock_11_min">Min (V)</label></td>
                            <td><input id="spinner_relock_11_min" class="relock_limit_min_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_relock_11_max">Max (V)</label></td>
                            <td><input id="spinner_relock_11_max" class="relock_limit_max_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_relock_11_slew_rate">Slew Rate (V/s)</label></td>
                            <td><input id="spinner_relock_11_slew_rate" class="slew_rate_spinner"></td>
                        </tr>
						<tr>
                            <td><label for="relock_11_input">Input</label></td>
                            <td>
                                <select id="relock_11_input" class="relock-select">
                                    <option value="4">AIN0</option>
                                    <option value="5">AIN1</option>
                                    <option value="6">AIN2</option>
                                    <option value="7">AIN3</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td><a>Input voltage (V)</a></td>
                            <td><output id="ain_voltage_11">0</output></td>
                        </tr>
                        <tr>
                            <td><a>Lock status</a></td>
                            <td><output id="lock_status_11">0</output></td>
                        </tr>                        
                    </table>
					    
                </fieldset>
            </fieldset>
			

            <fieldset class="output-group" id="output_group_21">
                <legend><h2>Output 2</h2></legend>

                <div class="controlgroup-vertical">
                    <label class="checkbox-container">PID + relock output enabled
                        <input type="checkbox" id="checkbox_pid_21_enabled" class="pid_enabled_checkbox">
                        <span class="checkmark"></span>
                    </label>
                </div>

				<a>Output voltage (V)</a>
                <output id="fast_output_21_voltage">0</output>

                <fieldset>
                    <legend><h3>PID</h3></legend>
					
                    <table>
                        <tr>
                            <td><label for="spinner_pid_21_sp">Setpoint (V)</label></td>
                            <td><input id="spinner_pid_21_sp" class="sp_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_pid_21_kp">KP</label></td>
                            <td><input id="spinner_pid_21_kp" class="kp_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_pid_21_ki">KI (1/s)</label></td>
                            <td><input id="spinner_pid_21_ki" class="ki_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_pid_21_kd">KD</label></td>
                            <td><input id="spinner_pid_21_kd" class="kd_spinner"></td>
                        </tr>
                    </table>
					
                    <div class="controlgroup-vertical">
                        <label class="checkbox-container">Inverted
                            <input type="checkbox" id="checkbox_pid_21_inv" class="inv_checkbox">
                            <span class="checkmark"></span>
                        </label>
                        <label class="checkbox-container">Hold internal state
                            <input type="checkbox" id="checkbox_pid_21_hold" class="hold_checkbox">
                            <span class="checkmark"></span>
                        </label>
                        <label class="checkbox-container">Integrator reset
                            <input type="checkbox" id="checkbox_pid_21_int_res" class="int_res_checkbox">
                            <span class="checkmark"></span>
                        </label>
                        <label class="checkbox-container">Automatic integrator reset
                            <input type="checkbox" id="checkbox_pid_21_int_auto_reset" class="int_auto_reset_checkbox">
                            <span class="checkmark"></span>
                        </label>                    
                        <button id="button_toggle_21" class="button">Toggle Lock/Scan</button>
                    </div>

                </fieldset>
				
				 <fieldset class="relock-group">
                    <legend><h3>Lock monitoring and relock</h3></legend>
					
                    <table>
                        <tr>
                            <label class="checkbox-container">Relock enabled
                                <input type="checkbox" id="checkbox_relock_21_enabled" class="relock_enabled_checkbox">
                                <span class="checkmark"></span>
                            </label>
                        </tr>
                        <tr>
                            <td><label for="spinner_relock_21_min">Min (V)</label></td>
                            <td><input id="spinner_relock_21_min" class="relock_limit_min_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_relock_21_max">Max (V)</label></td>
                            <td><input id="spinner_relock_21_max" class="relock_limit_max_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_relock_21_slew_rate">Slew Rate (V/s)</label></td>
                            <td><input id="spinner_relock_21_slew_rate" class="slew_rate_spinner"></td>
                        </tr>
						<tr>
                            <td><label for="relock_21_input">Input</label></td>
                            <td>
                                <select id="relock_21_input" class="relock-select">
                                    <option value="4">AIN0</option>
                                    <option value="5">AIN1</option>
                                    <option value="6">AIN2</option>
                                    <option value="7">AIN3</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td><a>Input voltage (V)</a></td>
                            <td><output id="ain_voltage_21">0</output></td>
                        </tr>
                        <tr>
                            <td><a>Lock status</a></td>
                            <td><output id="lock_status_21">0</output></td>
                        </tr>                             
                    </table>
					  
                </fieldset>
            </fieldset>
        </fieldset>
		
		
        <fieldset id="input_2" class="output-group">
            <legend><h1>Lockbox (Input 2)</h1></legend>

            <div>
                <a>Input voltage (V)</a>
                <output id="fast_input_2_voltage">0</output>
            </div>
			
            <fieldset class="output-group" id="output_group_12">
                <legend><h2>Output 1</h2></legend>

                <div class="controlgroup-vertical">
                    <label class="checkbox-container">PID + relock output enabled
                        <input type="checkbox" id="checkbox_pid_12_enabled" class="pid_enabled_checkbox">
                        <span class="checkmark"></span>
                    </label>
                </div>                

                <a>Output voltage (V)</a>
                <output id="fast_output_12_voltage">0</output>
				
                <fieldset>
                    <legend><h3>PID</h3></legend>
                    <table>
                        <tr>
                            <td><label for="spinner_pid_12_sp">Setpoint (V)</label></td>
                            <td><input id="spinner_pid_12_sp" class="sp_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_pid_12_kp">KP</label></td>
                            <td><input id="spinner_pid_12_kp" class="kp_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_pid_12_ki">KI (1/s)</label></td>
                            <td><input id="spinner_pid_12_ki" class="ki_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_pid_12_kd">KD</label></td>
                            <td><input id="spinner_pid_12_kd" class="kd_spinner"></td>
                        </tr>
                    </table>
					
                    <div class="controlgroup-vertical">
                        <label class="checkbox-container">Inverted
                            <input type="checkbox" id="checkbox_pid_12_inv" class="inv_checkbox">
                            <span class="checkmark"></span>
                        </label>
                        <label class="checkbox-container">Hold internal state
                            <input type="checkbox" id="checkbox_pid_12_hold" class="hold_checkbox">
                            <span class="checkmark"></span>
                        </label>
                        <label class="checkbox-container">Integrator reset
                            <input type="checkbox" id="checkbox_pid_12_int_res" class="int_res_checkbox">
                            <span class="checkmark"></span>
                        </label>
                        <label class="checkbox-container">Automatic integrator reset
                            <input type="checkbox" id="checkbox_pid_12_int_auto_reset" class="int_auto_reset_checkbox">
                            <span class="checkmark"></span>
                        </label>
                        <button id="button_toggle_12" class="button">Toggle Lock/Scan</button>
                    </div>

                </fieldset>
				
                <fieldset class="relock-group">
                    <legend><h3>Lock monitoring and relock</h3></legend>
					
                    <table>
                        <tr>
                            <label class="checkbox-container">Relock enabled
                                <input type="checkbox" id="checkbox_relock_12_enabled" class="relock_enabled_checkbox">
                                <span class="checkmark"></span>
                            </label>
                        </tr>
                        <tr>
                            <td><label for="spinner_relock_12_min">Min (V)</label></td>
                            <td><input id="spinner_relock_12_min" class="relock_limit_min_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_relock_12_max">Max (V)</label></td>
                            <td><input id="spinner_relock_12_max" class="relock_limit_max_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_relock_12_slew_rate">Slew Rate (V/s)</label></td>
                            <td><input id="spinner_relock_12_slew_rate" class="slew_rate_spinner"></td>
                        </tr>
						<tr>
                            <td><label for="relock_12_input">Input</label></td>
                            <td>
                                <select id="relock_12_input" class="relock-select">
                                    <option value="4">AIN0</option>
                                    <option value="5">AIN1</option>
                                    <option value="6">AIN2</option>
                                    <option value="7">AIN3</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td><a>Input voltage (V)</a></td>
                            <td><output id="ain_voltage_12">0</output></td>
                        </tr>
                        <tr>
                            <td><a>Lock status</a></td>
                            <td><output id="lock_status_12">0</output></td>
                        </tr>                             
                    </table>	
                    
                </fieldset>
            </fieldset>
			
            <fieldset class="output-group" id="output_group_22">
                <legend><h2>Output 2</h2></legend>

                <div class="controlgroup-vertical">
                    <label class="checkbox-container">PID + relock output enabled
                        <input type="checkbox" id="checkbox_pid_22_enabled" class="pid_enabled_checkbox">
                        <span class="checkmark"></span>
                    </label>
                </div>

                <a>Output voltage (V)</a>
                <output id="fast_output_22_voltage">0</output>
				
                <fieldset>
                    <legend><h3>PID</h3></legend>
					
                    <table>
                        <tr>
                            <td><label for="spinner_pid_22_sp">Setpoint (V)</label></td>
                            <td><input id="spinner_pid_22_sp" class="sp_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_pid_22_kp">KP</label></td>
                            <td><input id="spinner_pid_22_kp" class="kp_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_pid_22_ki">KI (1/s)</label></td>
                            <td><input id="spinner_pid_22_ki" class="ki_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_pid_22_kd">KD</label></td>
                            <td><input id="spinner_pid_22_kd" class="kd_spinner"></td>
                        </tr>
                    </table>
					
                    <div class="controlgroup-vertical">
                        <label class="checkbox-container">Inverted
                            <input type="checkbox" id="checkbox_pid_22_inv" class="inv_checkbox">
                            <span class="checkmark"></span>
                        </label>
                        <label class="checkbox-container">Hold internal state
                            <input type="checkbox" id="checkbox_pid_22_hold" class="hold_checkbox">
                            <span class="checkmark"></span>
                        </label>
                        <label class="checkbox-container">Integrator reset
                            <input type="checkbox" id="checkbox_pid_22_int_res" class="int_res_checkbox">
                            <span class="checkmark"></span>
                        </label>
                        <label class="checkbox-container">Automatic integrator reset
                            <input type="checkbox" id="checkbox_pid_22_int_auto_reset" class="int_auto_reset_checkbox">
                            <span class="checkmark"></span>
                        </label>                      
                        <button id="button_toggle_22" class="button">Toggle Lock/Scan</button>
                    </div>

                </fieldset>
				
				 <fieldset class="relock-group">
                    <legend><h3>Lock monitoring and relock</h3></legend>
					
                    <table>
                        <tr>
                            <label class="checkbox-container">Relock enabled
                                <input type="checkbox" id="checkbox_relock_22_enabled" class="relock_enabled_checkbox">
                                <span class="checkmark"></span>
                            </label>
                        </tr>
                        <tr>
                            <td><label for="spinner_relock_22_min">Min (V)</label></td>
                            <td><input id="spinner_relock_22_min" class="relock_limit_min_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_relock_22_max">Max (V)</label></td>
                            <td><input id="spinner_relock_22_max" class="relock_limit_max_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_relock_22_slew_rate">Slew Rate (V/s)</label></td>
                            <td><input id="spinner_relock_22_slew_rate" class="slew_rate_spinner"></td>
                        </tr>
						<tr>
                            <td><label for="relock_22_input">Input</label></td>
                            <td>
                                <select id="relock_22_input" class="relock-select">
                                    <option value="4">AIN0</option>
                                    <option value="5">AIN1</option>
                                    <option value="6">AIN2</option>
                                    <option value="7">AIN3</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td><a>Input voltage (V)</a></td>
                            <td><output id="ain_voltage_22">0</output></td>
                        </tr>
                        <tr>
                            <td><a>Lock status</a></td>
                            <td><output id="lock_status_22">0</output></td>
                        </tr>                             
                    </table>	
                    
                </fieldset>
            </fieldset>			
        </fieldset>

        <fieldset class="output-group">
            <legend><h1>Signal Generators</h1></legend>

            <fieldset>
                <legend><h2>Signal Generator 1</h2></legend>
                <table>
                    <tr>
                        <label class="checkbox-container">Enabled
                            <input type="checkbox" id="checkbox_sg_1_enabled" class="sg_enabled_checkbox">
                            <span class="checkmark"></span>
                        </label>
                    </tr>
                    <tr>
                        <label class="checkbox-container">Output offset when disabled
                            <input type="checkbox" id="checkbox_sg_1_poffset_enabled" class="sg_poffset_enabled_checkbox">
                            <span class="checkmark"></span>
                        </label>
                    </tr>                    
                    <tr>
                        <td><label for="spinner_sg_1_freq">Frequency (Hz)</label></td>
                        <td><input id="spinner_sg_1_freq" class="freq_spinner"></td>
                    </tr>
                    <tr>
                        <td><label for="spinner_sg_1_amp">Amplitude (V)</label></td>
                        <td><input id="spinner_sg_1_amp" class="output_spinner"></td>
                    </tr>
                    <tr>
                        <td><label for="spinner_sg_1_offset">Offset (V)</label></td>
                        <td><input id="spinner_sg_1_offset" class="output_spinner"></td>
                    </tr>
                    <tr>
                        <td><label for="sg_1_waveform">Waveform</label></td>
                        <td>
                            <select id="sg_1_waveform" class="waveform-select">
                                <option value="0">SINE</option>
                                <option value="1">SQUARE</option>
                                <option value="2">TRIANGLE</option>
                                <option value="3">SAWU</option>
                                <option value="4">SAWD</option>
                            </select>
                        </td>
                    </tr>
                </table>   
            </fieldset>

            <fieldset>
                <legend><h2>Signal Generator 2</h2></legend>
                <table>
                    <tr>
                        <label class="checkbox-container">Enabled
                            <input type="checkbox" id="checkbox_sg_2_enabled" class="sg_enabled_checkbox">
                            <span class="checkmark"></span>
                        </label>
                    </tr>
                    <tr>
                        <label class="checkbox-container">Output offset when disabled
                            <input type="checkbox" id="checkbox_sg_2_poffset_enabled" class="sg_poffset_enabled_checkbox">
                            <span class="checkmark"></span>
                        </label>
                    </tr>                                        
                    <tr>
                        <td><label for="spinner_sg_2_freq">Frequency (Hz)</label></td>
                        <td><input id="spinner_sg_2_freq" class="freq_spinner"></td>
                    </tr>
                    <tr>
                        <td><label for="spinner_sg_2_amp">Amplitude (V)</label></td>
                        <td><input id="spinner_sg_2_amp" class="output_spinner"></td>
                    </tr>
                    <tr>
                        <td><label for="spinner_sg_2_offset">Offset (V)</label></td>
                        <td><input id="spinner_sg_2_offset" class="output_spinner"></td>
                    </tr>
                    <tr>
                        <td><label for="sg_2_waveform">Waveform</label></td>
                        <td>
                            <select id="sg_2_waveform" class="waveform-select">
                                <option value="0">SINE</option>
                                <option value="1">SQUARE</option>
                                <option value="2">TRIANGLE</option>
                                <option value="3">SAWU</option>
                                <option value="4">SAWD</option>
                            </select>
                        </td>
                    </tr>
                </table>
            </fieldset>

        </fieldset>

        <fieldset class="output-group">
            <legend><h1>Options</h1></legend>

            <label class="checkbox-container">Hide
                <input type="checkbox" id="checkbox_opt_hide" class="checkbox">
                <span class="checkmark"></span>
            </label>

            <fieldset class="options-item">
                <legend><h2>Select Operating Mode</h2></legend>
                    <select id="select_op_mode">
                        <option value="3">Show all</option>
                        <option value="0">In1 -> Out1 and In2 -> Out2</option>
                        <option value="1">In1 -> Out1 and In1 -> Out2</option>
                        <option value="2">In2 -> Out1 and In2 -> Out2</option>
                    </select>
            </fieldset>

            <fieldset class="options-item">
                <legend><h2>Output Limits</h2></legend>
			
                <div id="accordion_limit" class="accordion">
                    <h3>Limit 1</h3>
                    <table>
                        <tr>
                            <td><label for="spinner_limit_1_min">Min (V)</label></td>
                            <td><input id="spinner_limit_1_min" class="output_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_limit_1_max">Max (V)</label></td>
                            <td><input id="spinner_limit_1_max" class="output_spinner"></td>
                        </tr>                   
                    </table>
                    <h3>Limit 2</h3>
                    <table>
                        <tr>
                            <td><label for="spinner_limit_2_min">Min (V)</label></td>
                            <td><input id="spinner_limit_2_min" class="output_spinner"></td>
                        </tr>
                        <tr>
                            <td><label for="spinner_limit_2_max">Max (V)</label></td>
                            <td><input id="spinner_limit_2_max" class="output_spinner"></td>
                        </tr>                   
                    </table>
                </div>
            </fieldset>

            <fieldset class="options-item">
                <legend><h2>Save</h2></legend>
                <button id="save_pams" class="button">Save parameters to SD card</button>
            </fieldset>

            <fieldset class="options-item">
                    <legend><h2>Load</h2></legend>
                    <button id= "load_pams" class="button">Load parameters from SD card</button>
            </fieldset>

        </fieldset> 


    </div>
	

</body>
</html>
